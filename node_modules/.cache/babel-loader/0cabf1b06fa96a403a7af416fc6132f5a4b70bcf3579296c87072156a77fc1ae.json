{"ast":null,"code":"import axios from\"axios\";const base_URL=\"https://todo-list.alphacamp.io/api\";//CRUD串接api設定\nconst axiosInstance=axios.create({baseURL:base_URL});//設定Interceptor攔截器\naxiosInstance.interceptors.request.use(config=>{// Do something before request is sent(先拿token, 在存入config header)\nconst token=localStorage.getItem(\"authToken\");if(token){config.headers[\"Authorization\"]=\"Bearer \".concat(token);console.log(config);}return config;},function(error){// Do something with request error\nconsole.error(error);});export async function getTodos(){try{const res=await axiosInstance.get(\"\".concat(base_URL,\"/todos\"));console.log(res.data.data);return res.data.data;}catch(error){console.error('[getTodos failed]:',error);}}export async function postTodos(payloads){const{title,isDone}=payloads;try{const res=await axiosInstance.post(\"\".concat(base_URL,\"/todos\"),{title,isDone});console.log(\"use axios post data to local server\");return res.data;}catch(error){console.error('[postTodos failed]',error);}}export async function patchTodos(payloads){try{var _payloads$id,_payloads$id2,_payloads$id3;console.log(\"Payloads:\",payloads);const id=((_payloads$id=payloads.id)===null||_payloads$id===void 0?void 0:_payloads$id.id)||payloads.id;const title=payloads.title||((_payloads$id2=payloads.id)===null||_payloads$id2===void 0?void 0:_payloads$id2.title);const isDone=payloads.isDone||((_payloads$id3=payloads.id)===null||_payloads$id3===void 0?void 0:_payloads$id3.isDone);const res=await axiosInstance.patch(\"\".concat(base_URL,\"/todos/\").concat(id),{id,title,isDone});return res.data;}catch(error){console.error('[patchTodo failed]',error);}}export async function deleteTodos(id){try{const res=await axiosInstance.delete(\"\".concat(base_URL,\"/todos/\").concat(id));return res.data;}catch(error){console.error('[deleteTodo failed]',error);}}","map":{"version":3,"names":["axios","base_URL","axiosInstance","create","baseURL","interceptors","request","use","config","token","localStorage","getItem","headers","concat","console","log","error","getTodos","res","get","data","postTodos","payloads","title","isDone","post","patchTodos","_payloads$id","_payloads$id2","_payloads$id3","id","patch","deleteTodos","delete"],"sources":["/Users/huang/todolist-react-starter/src/api/todo.js"],"sourcesContent":["import axios from \"axios\";\n\nconst base_URL = \"https://todo-list.alphacamp.io/api\";\n//CRUD串接api設定\n\nconst axiosInstance = axios.create({\n  baseURL : base_URL,\n\n})\n\n//設定Interceptor攔截器\naxiosInstance.interceptors.request.use(\n   (config) => {\n     // Do something before request is sent(先拿token, 在存入config header)\n     const token = localStorage.getItem(\"authToken\");\n     if (token) {\n       config.headers[\"Authorization\"] = `Bearer ${token}`;\n       console.log(config)\n     }\n     return config;\n   },\n  function (error) {\n    // Do something with request error\n    console.error(error);\n  }\n);\n\n\n\nexport async function getTodos(){\n  try { \n    const res = await axiosInstance.get(`${base_URL}/todos`);\n    console.log(res.data.data)\n    return res.data.data\n  }\n  catch(error) {\n    console.error('[getTodos failed]:',error)\n  }\n}\n\nexport async function postTodos(payloads){\n  const { title, isDone } = payloads\n  try { \n    const res = await axiosInstance.post(`${base_URL}/todos`, {\n      title,\n      isDone,\n    });\n    console.log(\"use axios post data to local server\")\n    return res.data\n  }\n  catch(error) {\n    console.error('[postTodos failed]',error)\n  }\n}\n\n\nexport async function patchTodos(payloads){\n  try {\n    console.log(\"Payloads:\", payloads);\n    const id = payloads.id?.id || payloads.id;\n    const title = payloads.title || payloads.id?.title;\n    const isDone = payloads.isDone || payloads.id?.isDone;\n\n    const res = await axiosInstance.patch(`${base_URL}/todos/${id}`, {\n      id,\n      title,\n      isDone,\n    });\n    return res.data\n  }\n  catch(error){\n    console.error('[patchTodo failed]',error)\n  }\n}\n\nexport async function deleteTodos(id){\n  try {\n    const res = await axiosInstance.delete(`${base_URL}/todos/${id}`);\n    return res.data\n  }\n  catch(error){\n    console.error('[deleteTodo failed]',error)\n  }\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,KAAM,CAAAC,QAAQ,CAAG,oCAAoC,CACrD;AAEA,KAAM,CAAAC,aAAa,CAAGF,KAAK,CAACG,MAAM,CAAC,CACjCC,OAAO,CAAGH,QAEZ,CAAC,CAAC,CAEF;AACAC,aAAa,CAACG,YAAY,CAACC,OAAO,CAACC,GAAG,CAClCC,MAAM,EAAK,CACV;AACA,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,CAC/C,GAAIF,KAAK,CAAE,CACTD,MAAM,CAACI,OAAO,CAAC,eAAe,CAAC,WAAAC,MAAA,CAAaJ,KAAK,CAAE,CACnDK,OAAO,CAACC,GAAG,CAACP,MAAM,CAAC,CACrB,CACA,MAAO,CAAAA,MAAM,CACf,CAAC,CACF,SAAUQ,KAAK,CAAE,CACf;AACAF,OAAO,CAACE,KAAK,CAACA,KAAK,CAAC,CACtB,CACF,CAAC,CAID,MAAO,eAAe,CAAAC,QAAQA,CAAA,CAAE,CAC9B,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAhB,aAAa,CAACiB,GAAG,IAAAN,MAAA,CAAIZ,QAAQ,UAAQ,CAAC,CACxDa,OAAO,CAACC,GAAG,CAACG,GAAG,CAACE,IAAI,CAACA,IAAI,CAAC,CAC1B,MAAO,CAAAF,GAAG,CAACE,IAAI,CAACA,IAAI,CACtB,CACA,MAAMJ,KAAK,CAAE,CACXF,OAAO,CAACE,KAAK,CAAC,oBAAoB,CAACA,KAAK,CAAC,CAC3C,CACF,CAEA,MAAO,eAAe,CAAAK,SAASA,CAACC,QAAQ,CAAC,CACvC,KAAM,CAAEC,KAAK,CAAEC,MAAO,CAAC,CAAGF,QAAQ,CAClC,GAAI,CACF,KAAM,CAAAJ,GAAG,CAAG,KAAM,CAAAhB,aAAa,CAACuB,IAAI,IAAAZ,MAAA,CAAIZ,QAAQ,WAAU,CACxDsB,KAAK,CACLC,MACF,CAAC,CAAC,CACFV,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC,CAClD,MAAO,CAAAG,GAAG,CAACE,IAAI,CACjB,CACA,MAAMJ,KAAK,CAAE,CACXF,OAAO,CAACE,KAAK,CAAC,oBAAoB,CAACA,KAAK,CAAC,CAC3C,CACF,CAGA,MAAO,eAAe,CAAAU,UAAUA,CAACJ,QAAQ,CAAC,CACxC,GAAI,KAAAK,YAAA,CAAAC,aAAA,CAAAC,aAAA,CACFf,OAAO,CAACC,GAAG,CAAC,WAAW,CAAEO,QAAQ,CAAC,CAClC,KAAM,CAAAQ,EAAE,CAAG,EAAAH,YAAA,CAAAL,QAAQ,CAACQ,EAAE,UAAAH,YAAA,iBAAXA,YAAA,CAAaG,EAAE,GAAIR,QAAQ,CAACQ,EAAE,CACzC,KAAM,CAAAP,KAAK,CAAGD,QAAQ,CAACC,KAAK,IAAAK,aAAA,CAAIN,QAAQ,CAACQ,EAAE,UAAAF,aAAA,iBAAXA,aAAA,CAAaL,KAAK,EAClD,KAAM,CAAAC,MAAM,CAAGF,QAAQ,CAACE,MAAM,IAAAK,aAAA,CAAIP,QAAQ,CAACQ,EAAE,UAAAD,aAAA,iBAAXA,aAAA,CAAaL,MAAM,EAErD,KAAM,CAAAN,GAAG,CAAG,KAAM,CAAAhB,aAAa,CAAC6B,KAAK,IAAAlB,MAAA,CAAIZ,QAAQ,YAAAY,MAAA,CAAUiB,EAAE,EAAI,CAC/DA,EAAE,CACFP,KAAK,CACLC,MACF,CAAC,CAAC,CACF,MAAO,CAAAN,GAAG,CAACE,IAAI,CACjB,CACA,MAAMJ,KAAK,CAAC,CACVF,OAAO,CAACE,KAAK,CAAC,oBAAoB,CAACA,KAAK,CAAC,CAC3C,CACF,CAEA,MAAO,eAAe,CAAAgB,WAAWA,CAACF,EAAE,CAAC,CACnC,GAAI,CACF,KAAM,CAAAZ,GAAG,CAAG,KAAM,CAAAhB,aAAa,CAAC+B,MAAM,IAAApB,MAAA,CAAIZ,QAAQ,YAAAY,MAAA,CAAUiB,EAAE,CAAE,CAAC,CACjE,MAAO,CAAAZ,GAAG,CAACE,IAAI,CACjB,CACA,MAAMJ,KAAK,CAAC,CACVF,OAAO,CAACE,KAAK,CAAC,qBAAqB,CAACA,KAAK,CAAC,CAC5C,CACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}