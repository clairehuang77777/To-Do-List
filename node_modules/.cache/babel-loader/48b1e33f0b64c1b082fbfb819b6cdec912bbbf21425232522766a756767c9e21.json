{"ast":null,"code":"import{AuthContainer,AuthInputContainer,AuthButton,AuthLinkText}from\"../components/common/auth.styled\";import{AuthInput}from\"../components\";import{ACLogoIcon}from\"../assets/images\";import{useState,useEffect}from'react';import{Link,useNavigate}from\"react-router-dom\";import Swal from\"sweetalert2\";import{useAuth}from\"../contexts/AuthContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginPage=()=>{//用state管理onchange變化\nconst[username,setUsername]=useState(\"\");const[password,setPassword]=useState(\"\");const navigate=useNavigate();//掛載AuthContext\nconst{login,isAuthenticated}=useAuth();function handleAccountOnChange(event){setUsername(event.target.value);console.log(username);}function handlePassWordOnChange(event){setPassword(event.target.value);console.log(password);}async function handleLoginClick(){if(username.length===0){return;}if(password.length===0){return;}const success=await login({username,password});console.log(\"AuthContent login Return success!\");if(success){Swal.fire({title:\"登入成功!\",icon:\"success\",showConfirmButton:false,timer:1000,position:\"center\"});}else{Swal.fire({title:\"登入失敗!\",icon:\"error\",showConfirmButton:false,timer:1000,position:\"center\"});setUsername('');//把輸入的內容清除\nsetPassword('');//把輸入的內容清除\n}}useEffect(()=>{if(isAuthenticated){navigate(\"/todo\");console.log(\"isAuthenticated change or navigate triggered\");}},[navigate,isAuthenticated]);return/*#__PURE__*/_jsxs(AuthContainer,{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ACLogoIcon,{})}),/*#__PURE__*/_jsx(\"h1\",{children:\"\\u767B\\u5165 Todo\"}),/*#__PURE__*/_jsx(AuthInputContainer,{children:/*#__PURE__*/_jsx(AuthInput,{label:\"\\u5E33\\u865F\",placeholder:\"\\u8ACB\\u8F38\\u5165\\u5E33\\u865F\",type:\"text\",value:username,onChange:handleAccountOnChange})}),/*#__PURE__*/_jsx(AuthInputContainer,{children:/*#__PURE__*/_jsx(AuthInput,{label:\"\\u5BC6\\u78BC\",placeholder:\"\\u8ACB\\u8F38\\u5165\\u5BC6\\u78BC\",type:\"password\",value:password,onChange:handlePassWordOnChange})}),/*#__PURE__*/_jsx(AuthButton,{onClick:handleLoginClick,children:\"\\u767B\\u5165\"}),/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:/*#__PURE__*/_jsx(AuthLinkText,{children:\"\\u8A3B\\u518A\"})})]});};export default LoginPage;","map":{"version":3,"names":["AuthContainer","AuthInputContainer","AuthButton","AuthLinkText","AuthInput","ACLogoIcon","useState","useEffect","Link","useNavigate","Swal","useAuth","jsx","_jsx","jsxs","_jsxs","LoginPage","username","setUsername","password","setPassword","navigate","login","isAuthenticated","handleAccountOnChange","event","target","value","console","log","handlePassWordOnChange","handleLoginClick","length","success","fire","title","icon","showConfirmButton","timer","position","children","label","placeholder","type","onChange","onClick","to"],"sources":["/Users/huang/todolist-react-starter/src/pages/LoginPage.jsx"],"sourcesContent":["import {\n  AuthContainer,\n  AuthInputContainer,\n  AuthButton,\n  AuthLinkText,\n} from \"../components/common/auth.styled\";\nimport { AuthInput } from \"../components\";\nimport { ACLogoIcon } from \"../assets/images\";\nimport { useState, useEffect } from 'react'\nimport { Link,useNavigate } from \"react-router-dom\";\nimport Swal from \"sweetalert2\";\nimport { useAuth } from \"../contexts/AuthContext\";\n\nconst LoginPage = () => {\n  //用state管理onchange變化\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const navigate = useNavigate()\n\n  //掛載AuthContext\n  const { login, isAuthenticated } = useAuth();\n\n  function handleAccountOnChange(event){\n    setUsername(event.target.value);\n    console.log(username)\n  }\n  function handlePassWordOnChange(event) {\n    setPassword(event.target.value);\n    console.log(password)\n  }\n\n  async function handleLoginClick(){\n    if(username.length === 0){\n      return\n    }\n\n    if(password.length === 0){\n      return\n    }\n    \n    const success = await login({username, password})\n    console.log(\"AuthContent login Return success!\")\n    if (success){\n      Swal.fire({\n        title: \"登入成功!\",\n        icon: \"success\",\n        showConfirmButton: false,\n        timer: 1000,\n        position: \"center\"\n      })\n    } else {\n      Swal.fire({\n        title: \"登入失敗!\",\n        icon: \"error\",\n        showConfirmButton: false,          \n        timer: 1000,\n         position: \"center\",\n        });\n      setUsername('') //把輸入的內容清除\n      setPassword('') //把輸入的內容清除\n    }\n  }\n\n  useEffect(() => {\n    if (isAuthenticated) {\n      navigate(\"/todo\")\n      console.log(\"isAuthenticated change or navigate triggered\")\n    }\n  }, [navigate,isAuthenticated]);\n\n  return (\n    <AuthContainer>\n      <div>\n        <ACLogoIcon />\n      </div>\n      <h1>登入 Todo</h1>\n\n      <AuthInputContainer>\n        <AuthInput\n          label=\"帳號\"\n          placeholder=\"請輸入帳號\"\n          type=\"text\"\n          value={username}\n          onChange={handleAccountOnChange}\n        />\n      </AuthInputContainer>\n\n      <AuthInputContainer>\n        <AuthInput\n          label=\"密碼\"\n          placeholder=\"請輸入密碼\"\n          type=\"password\"\n          value={password}\n          onChange={handlePassWordOnChange}\n        />\n      </AuthInputContainer>\n      <AuthButton \n        onClick={handleLoginClick}>登入</AuthButton>\n      <Link to=\"/signup\">\n        <AuthLinkText>註冊</AuthLinkText>\n      </Link>\n    </AuthContainer>\n  );\n};\n\nexport default LoginPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}