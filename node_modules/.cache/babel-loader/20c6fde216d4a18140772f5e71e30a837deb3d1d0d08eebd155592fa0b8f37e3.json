{"ast":null,"code":"import _objectSpread from\"/Users/huang/todolist-react-starter/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import axios from\"axios\";const auth_Endpoint=\"https://todo-list.alphacamp.io/api/auth\";export async function login(_ref){let{username,password}=_ref;try{const{data}=await axios.post(\"\".concat(auth_Endpoint,\"/login\"),{username,password});console.log(data);const{authToken}=data;//有通過server檢查才有authToken,加入success key. 若沒通過, 直接返回所有data\nif(authToken){return _objectSpread({success:true},data);}return data;}catch(error){console.error(error);}}export async function signup(_ref2){let{username,password,email}=_ref2;try{const{data}=await axios.post(\"\".concat(auth_Endpoint,\"/register\"),{username,password,email});//使用解構函式從data中取出authToken\nconst{authToken}=data;if(authToken){return _objectSpread({success:true},data);}return{data};}catch(error){console.error(error);}}export async function checkPermission(authToken){if(!authToken){console.error(\"No authToken provided for permission check\");return null;}try{const{data}=await axios.get(\"\".concat(auth_Endpoint,\"/test-token\"),{headers:{Authorization:\"Bearer \".concat(authToken)}});return data.success;}catch(error){var _error$response;console.error(\"Error response:\",((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||error.message);return null;}}","map":{"version":3,"names":["axios","auth_Endpoint","login","_ref","username","password","data","post","concat","console","log","authToken","_objectSpread","success","error","signup","_ref2","email","checkPermission","get","headers","Authorization","_error$response","response","message"],"sources":["/Users/huang/todolist-react-starter/src/api/auth.js"],"sourcesContent":["import axios from \"axios\";\n\nconst auth_Endpoint = \"https://todo-list.alphacamp.io/api/auth\";\n\nexport async function login({username, password}){\n  try {\n    const { data } = await axios.post(`${auth_Endpoint}/login`, {\n      username,\n      password,\n    });\n\n    console.log(data);\n\n    const { authToken } = data;\n    //有通過server檢查才有authToken,加入success key. 若沒通過, 直接返回所有data\n    if (authToken) {\n      return {\n        success: true,\n        ...data,\n      }\n    }\n    return data;\n  }\n  catch(error){\n    console.error(error)\n  }\n}\n\nexport async function signup({username , password, email}){\n  try{\n    const { data } = await axios.post(`${auth_Endpoint}/register`, { \n      username, \n      password , \n      email});\n\n    //使用解構函式從data中取出authToken\n    const { authToken } = data \n\n    if(authToken){\n      return {\n        success:true,\n        ...data\n      }\n    }\n    return {\n      data\n    }\n  }\n  catch(error){\n    console.error(error)\n  }\n}\n\nexport async function checkPermission(authToken){\n  if (!authToken) {\n      console.error(\"No authToken provided for permission check\");\n      return null;\n      }\n  try {     \n      const { data } = await axios.get(`${auth_Endpoint}/test-token`, {\n        headers: {\n          Authorization: `Bearer ${authToken}`,\n        },\n      });\n    return data.success;\n  } catch(error){\n    console.error(\"Error response:\", error.response?.data || error.message);\n    return null\n  }\n}"],"mappings":"wHAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,KAAM,CAAAC,aAAa,CAAG,yCAAyC,CAE/D,MAAO,eAAe,CAAAC,KAAKA,CAAAC,IAAA,CAAsB,IAArB,CAACC,QAAQ,CAAEC,QAAQ,CAAC,CAAAF,IAAA,CAC9C,GAAI,CACF,KAAM,CAAEG,IAAK,CAAC,CAAG,KAAM,CAAAN,KAAK,CAACO,IAAI,IAAAC,MAAA,CAAIP,aAAa,WAAU,CAC1DG,QAAQ,CACRC,QACF,CAAC,CAAC,CAEFI,OAAO,CAACC,GAAG,CAACJ,IAAI,CAAC,CAEjB,KAAM,CAAEK,SAAU,CAAC,CAAGL,IAAI,CAC1B;AACA,GAAIK,SAAS,CAAE,CACb,OAAAC,aAAA,EACEC,OAAO,CAAE,IAAI,EACVP,IAAI,EAEX,CACA,MAAO,CAAAA,IAAI,CACb,CACA,MAAMQ,KAAK,CAAC,CACVL,OAAO,CAACK,KAAK,CAACA,KAAK,CAAC,CACtB,CACF,CAEA,MAAO,eAAe,CAAAC,MAAMA,CAAAC,KAAA,CAA8B,IAA7B,CAACZ,QAAQ,CAAGC,QAAQ,CAAEY,KAAK,CAAC,CAAAD,KAAA,CACvD,GAAG,CACD,KAAM,CAAEV,IAAK,CAAC,CAAG,KAAM,CAAAN,KAAK,CAACO,IAAI,IAAAC,MAAA,CAAIP,aAAa,cAAa,CAC7DG,QAAQ,CACRC,QAAQ,CACRY,KAAK,CAAC,CAAC,CAET;AACA,KAAM,CAAEN,SAAU,CAAC,CAAGL,IAAI,CAE1B,GAAGK,SAAS,CAAC,CACX,OAAAC,aAAA,EACEC,OAAO,CAAC,IAAI,EACTP,IAAI,EAEX,CACA,MAAO,CACLA,IACF,CAAC,CACH,CACA,MAAMQ,KAAK,CAAC,CACVL,OAAO,CAACK,KAAK,CAACA,KAAK,CAAC,CACtB,CACF,CAEA,MAAO,eAAe,CAAAI,eAAeA,CAACP,SAAS,CAAC,CAC9C,GAAI,CAACA,SAAS,CAAE,CACZF,OAAO,CAACK,KAAK,CAAC,4CAA4C,CAAC,CAC3D,MAAO,KAAI,CACX,CACJ,GAAI,CACA,KAAM,CAAER,IAAK,CAAC,CAAG,KAAM,CAAAN,KAAK,CAACmB,GAAG,IAAAX,MAAA,CAAIP,aAAa,gBAAe,CAC9DmB,OAAO,CAAE,CACPC,aAAa,WAAAb,MAAA,CAAYG,SAAS,CACpC,CACF,CAAC,CAAC,CACJ,MAAO,CAAAL,IAAI,CAACO,OAAO,CACrB,CAAE,MAAMC,KAAK,CAAC,KAAAQ,eAAA,CACZb,OAAO,CAACK,KAAK,CAAC,iBAAiB,CAAE,EAAAQ,eAAA,CAAAR,KAAK,CAACS,QAAQ,UAAAD,eAAA,iBAAdA,eAAA,CAAgBhB,IAAI,GAAIQ,KAAK,CAACU,OAAO,CAAC,CACvE,MAAO,KAAI,CACb,CACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}